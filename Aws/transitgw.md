# transit gateway

### 그게 뭐임 

    동일한 리전내의 VPC 와 VPN 을 연결하고 그 사이 트래픽을 라우팅 해주는 역할 (라우터)

만약 3개의 VPC 와 한곳의 온프레미스 데이터센터를 연결해야한다고 했을때 데이터센터에서는 한곳의 VPN 연결이 되어있는 VPC 에서만 연결이 가능하여 VPN 연결이 안되어있는 서브넷 및 VPC 는 온프레미스 에 접근할수 없다. 그리고 직접 피어링 이 되어있지 않는 VPC 는 다른 VPC 를 통해서 전이적으로 VPC 에 접근이 불가능하다. 심지어는 각각의 로컬 라우팅 테이블을 모두 설정해줘야하며, 이렇게 Point to Point 형식으로 연결한 네트워크는 트러블 슈팅이 힘들어진다.

이러한 문제점을 Transit GW 를 사용하게 된다면 일단 local 라우팅 테이블에서 내 대역이 아닌 모든 다른 트레픽을 TGW 로 보내면 내부의 라우팅 테이블을 통해서 목적지 로 라우팅 해준다. 그렇다면 서로서로 그물망 같이 피어링 하지 않아도 되며, 이를 통해서 각각의 라우팅 규칙 을 생성하여 여러 규칙들을 각각의 VPC 에 적용가능하다.

여기서 라우팅 테이블들은 ATC 라는걸로 전달하게 되는데 ENI 에 라우팅 테이블을 Attatchment 하는 구조로 이렇게 한다면 각각의 ENI 가 연결된 곳 마다 라우팅 테이블을 적용시킬수 있기 때문에 각각의 VPC 마다 규칙을 적용시킬수 있는것이다. 